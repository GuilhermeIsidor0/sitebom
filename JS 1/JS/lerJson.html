<!DOCTYPE html>
<html>
<head>
    <title>Leitura de JSON em JavaScript</title>
    <style>
        body, input {
            text-align: center;
        }

        input {
            border-color: blue;
            border-radius: 5px;
            height: 25px;
            font-size: 20px;
            cursor: pointer
        }

        form {
            flex-direction: column;
            display: flex;
            width: 300px;
            margin: 0 auto;
        }

        form, label, input {
            margin-bottom: 15px;
        }

        label {
            font-size: 30px;
            font-weight: bolder;
        }

        .error {
            color: red;
            margin-top: -10px;
            margin-bottom: 15px;
        }
        button{
            color: black;
            font-size: 20px;
             cursor: pointer;
        }
        button:hover{
           color:red;
           font-size: 22px;
        }
    </style>
</head>
<body>

    <fieldset>
        <form id="formPesquisa">
            <label for="nome">Nome:</label>    
            <input type="text" id="nome" required  placeholder="Digite o nome">
 
            <label for="idade">Idade:</label>    
            <input type="number" id="idade" required placeholder="Digite a idade">
 
            <span id="errorIdade" class="error"></span>  

            <label for="email">Email:</label>    
            <input type="email" id="email" required placeholder="Digite o email">

            <button type="submit">Pesquisar</button>
        </form>
    </fieldset>

    <div id="resultados"></div>

    <script>
        // Função para ler o arquivo JSON
        async function lerJSON() {
            try {
                const response = await fetch('usuarios.json');
                if (!response.ok) {
                    throw new Error('Erro ao carregar o arquivo JSON: ' + response.statusText);
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Erro ao ler o arquivo JSON:', error);
            }
        }

        function pesquisarDados(data, nome, idade, email) {
            return data.filter(function(usuario) {
                var Nome = true;
                var Idade = true;
                var Email = true;

                if (nome !== "") {
                    if (usuario.nome.indexOf(nome) === -1) {
                        Nome = false;
                    }
                }

                if (idade !== "") {
                    if (usuario.idade != idade) {
                        Idade = false;
                    }
                }

                if (email !== "") {
                    if (usuario.email.indexOf(email) === -1) {
                        Email = false;
                    }
                }

                return Nome && Idade && Email;
            });
        }

    
        function exibirResultados(resultados) {
            var divResultados = document.getElementById('resultados');
            divResultados.innerHTML = "";

            if (resultados.length === 0) {
                divResultados.innerHTML = "<p>Nenhum resultado encontrado.</p>";
            } else {
                resultados.forEach(function(usuario) {
                    var paragrafo = document.createElement('p');
                    paragrafo.textContent = "Nome: " + usuario.nome + ", Idade: " + usuario.idade + ", Email: " + usuario.email;
                    divResultados.appendChild(paragrafo);
                });
            }
        }

        document.getElementById('formPesquisa').addEventListener('submit', async function(event) {
            event.preventDefault();

            var nome = document.getElementById('nome').value;
            var idade = document.getElementById('idade').value;
            var email = document.getElementById('email').value;
            var errorIdade = document.getElementById('errorIdade');

             
            if (idade <= 0) {
                errorIdade.textContent = "A idade não pode ser um valor negativo.";
                return;  
            } else {
                errorIdade.textContent = "";  
            }
        if (idade > 120) {
            errorIdade.textContent =  "Ninguém acima dessa idade ainda vivo";
            return; } else{
                errorIdade.textContent ="";
            }
        
            var data = await lerJSON();
            var resultados = pesquisarDados(data, nome, idade, email);

            exibirResultados(resultados);
        });

    </script>

</body>
</html>
