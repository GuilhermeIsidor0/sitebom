<!DOCTYPE html>
<html>
<head>
    <title>Leitura de JSON em JavaScript</title>
    <style>
        body, input {
            text-align: center;
        }

        input {
            border-color: blue;
            border-radius: 5px;
            height: 25px;
            font-size: 20px;
            cursor: pointer
        }

        form {
            flex-direction: column;
            display: flex;
            width: 300px;
            margin: 0 auto;
        }

        form, label, input {
            margin-bottom: 15px;
        }

        label {
            font-size: 30px;
            font-weight: bolder;
        }

        .error {
            color: red;
            margin-top: -10px;
            margin-bottom: 15px;
        }
        button{
            color: black;
            font-size: 20px;
             cursor: pointer;
        }
        button:hover{
           color:red;
           font-size: 22px;
        }
    </style>
</head>
<body>

    <fieldset>
        <form id="formPesquisa">
            <label for="nome">Nome:</label>    
            <input type="text" id="nome" placeholder="Digite o nome">
 
            <label for="idade">Idade:</label>    
            <input type="number" id="idade" placeholder="Digite a idade">
 
           

            <label for="estado">Estado:</label>    
            <input type="text" id="estado" placeholder="Digite o estado">

            <button type="submit">Pesquisar</button>
        </form>
    </fieldset>

    <div id="resultados"></div>

    <script>
        // Função para ler o arquivo JSON
        async function lerJSON() {
            try {
                const response = await fetch('usuarios.json');
                if (!response.ok) {
                    throw new Error('Erro ao carregar o arquivo JSON: ' + response.statusText);
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Erro ao ler o arquivo JSON:', error);
            }
        }

        function pesquisarDados(data, nome, idade, email) {
            return data.filter(function(usuario) {
                var Bairro = true;
                var Cidade = true;
                var Cep = true;
                var Estado = true;
                var Logradouro = true;

                if (bairro !== "") {
                    if (usuario.bairro.indexOf(bairro) === -1) {
                        Bairro = false;
                    }
                }

                if (cidade !== "") {
                    if (usuario.cidade != cidade) {
                       Cidade = false;
                    }
                }

                if (cep !== "") {
                    if (usuario.cep.indexOf(cep) === -1) {
                        Cep = false;
                    }
                }
                 if (estado !== "") {
                    if (usuario.estado.indexOf(estado) === -1) {
                        estado = false;
                    }
                }
                 if (logradouro !== "") {
                    if (usuario.logradouro.indexOf(logradouro) === -1) {
                        logradouro = false;
                    }
                }

                return Cep && Bairro && Cidade && Estado && Logradouro;
            });
        }

    
        function exibirResultados(resultados) {
            var divResultados = document.getElementById('resultados');
            divResultados.innerHTML = "";

            if (resultados.length === 0) {
                divResultados.innerHTML = "<p>Nenhum resultado encontrado.</p>";
            } else {
                resultados.forEach(function(usuario) {
                    var paragrafo = document.createElement('p');
                    paragrafo.textContent = "Bairro: " + usuario.bairro + ", Cep: " + usuario.cep + ", Cidade: " + usuario.cidade + ", Estado: " + usuario.estado ", Logradouro:" + usuario.logradouro; 
                    divResultados.appendChild(paragrafo);
                });
            }
        }

        document.getElementById('formPesquisa').addEventListener('submit', async function(event) {
            event.preventDefault();

            var cidade = document.getElementById('cidade').value;
            var cep = document.getElementById('cep').value;
            var bairro = document.getElementById('bairro').value;
            var estado = document.getElementById('estado').value;
            var logradouro = document.getElementById('logradouro').value;
            
            

             
           
        
            var data = await lerJSON();
            var resultados = pesquisarDados(data, bairro, cidade, estado, cep, logradouro);

            exibirResultados(resultados);
        });

    </script>

</body>
</html>
